
<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Requirements</h5>
      </div>
        <div class="modal-body">
        <%= form_with url: workers_by_skill_path, method: :get, id: "filter-form", remote: true do |f| %>

                <div class="field">
                    <%= f.label :skill_id %><br />
                    <%= f.collection_select :id,Skill.all,:id,:skill_type,prompt:true %>
                </div>
                <div class="field">
                    <%= f.label :from_date, 'From Date' %><br />
                    <%= f.date_field :from_date, class: 'date form-control'%>
                </div>
                <div class="field">
                    <%= f.label :to_date, 'To Date' %><br />
                    <%= f.date_field :to_date, class: 'date form-control', id: 'worker_to_date' %>
                </div>

                <div class="field">
                    <%= f.label :day_night  %>
                    <%= select_tag :day_night, options_for_select(["Day", "Night"]), class: "form-control", id: "day_night_select" %>
                </div>

                <div class="field">
                    <%= f.label :gender  %>
                    <%= select_tag :gender, options_for_select(["Male", "Female"]), class: "form-control", id: "gender_select" %>
                </div>

                <div class="field">
                    <%= label :hours_per_day, "Hours per Day" %>
                    <%= number_field :hours_per_day, nil, class: "form-control", min: 1, id: "hours_per_day_input" %>
                </div>

                
                <div class="field">
                    <%= label :timing, "Timing" %>
                    <div id="timing_scroll">
                        <select name="timing" class="field form-control">
                        <!-- Options will be dynamically added here -->
                        </select>
                    </div>
                    </div>

                <%= submit_tag "Apply Filters", class: "btn btn-primary" %>
            <% end %>
            

        </div>
    </div>
  </div>
</div>

<script>
document.getElementById('day_night_select').addEventListener('change', function() {
    const hoursPerDay = parseInt(document.getElementById('hours_per_day_input').value);
    const dayNight = this.value;
    const timingSelect = document.querySelector('#timing_scroll select');
    timingSelect.innerHTML = '';
  
    let startHour, endHour;
  
    if (dayNight === 'Day') {
      startHour = 4;
      endHour = 17;
    }
   else if (dayNight === 'Night') {
      startHour = 18;
      endHour = 29; 
    }
  
    for (let i = startHour; i <= endHour - hoursPerDay; i++) {
      const option = document.createElement('option');
      option.value = i % 24; // Wrap around to 0 if greater than 23
      option.textContent = `${i % 24}:00 - ${(i + hoursPerDay) % 24}:00`;
      timingSelect.appendChild(option);
    }
  });
  
  document.getElementById('hours_per_day_input').addEventListener('input', function() {
    document.getElementById('day_night_select').dispatchEvent(new Event('change'));
  });


</script>