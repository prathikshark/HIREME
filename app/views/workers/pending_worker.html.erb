<div class="worker-container">

<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Sl.No</th>
      <th scope="col">Name</th>
      <th scope="col">Gender</th>
      <th scope="col">Age</th>
      <th scope="col">Approve</th>
      <th scope="col">Reject</th>
      <th scope="col">Remove</th>
      <th scope="col">View</th>
    </tr>
  </thead>
  <tbody>
    <% count=0 %>
      <% @workers.each do |worker| %>
    <tr>
      <th scope="row"><p class="card-text"><b> <%= count+=1 %></b></th>
      <td> <p class="card-text"><b> <%= worker.user.name %></b></p></td>
      <td> <p class="card-text"> <%= worker.gender %></p></td>
      <td> <p class="card-text"><%= worker.age %></p></td>
      <td> <button class='btn approve-btn' data-worker-id="<%= worker.id %>">Approve</button></td>
      <td> <button class='btn approve-btn' data-worker-id="<%= worker.id %>">Reject</button></td>

      <td> <%= button_to 'Remove', worker_path(id: worker.id), method: :delete, class: 'btn purple-btn' %></td>
      <td> <%= button_to 'View', worker_path(id: worker.id), method: :get, class: 'btn purple-btn' %></td>
    </tr>
 <% end %>

  </tbody>
</table>


<script>
$(document).ready(function() {
  $('.approve-btn').click(function() {
    var workerId = $(this).data('worker-id');
    $.ajax({
      url: '/workers/' + workerId + '/approve',
      type: 'PATCH',
      success: function(response) {
        console.log('Worker status updated to approved');
      },
      error: function(xhr, status, error) {
        console.error('Error updating worker status:', error);
      }
    });
  });
});
</script>








